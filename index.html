<!DOCTYPE html>
<html>
  <script>
    window.onload = () => {
      function parseUrlParams(url /*: string */) {
        if (!url) url = window.location.search
        const query = url.substr(1)
        const result = {}
        query.split('&').forEach(function(part) {
          const item = part.split('=')
          result[item[0]] = decodeURIComponent(item[1])
        })
        return result
      }

      setTimeout(() => {
        document.write('did nav.')
        window.location = 'apolloks://callback'
      }, 2000)

      const vars = new URL(location.href)
      document.write(
        `<pre>${JSON.stringify(
          {
            search: parseUrlParams(vars.search),
            hash: vars.hash
          },
          null,
          2
        )}</pre>
        <p>Redirecting in 2s...</p>`
      )
    }
  </script>
  <body>
    loading...
  </body>
</html>
